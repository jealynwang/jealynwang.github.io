(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Iftg:function(e,t,i){"use strict";var r=i("l3n2");i.n(r).a},"RU/L":function(e,t,i){i("Rqdy");var r=i("WEpk").Object;e.exports=function(e,t,i){return r.defineProperty(e,t,i)}},Rqdy:function(e,t,i){var r=i("Y7ZC");r(r.S+r.F*!i("jmDH"),"Object",{defineProperty:i("2faE").f})},SEkw:function(e,t,i){e.exports={default:i("RU/L"),__esModule:!0}},YEIV:function(e,t,i){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(i("SEkw"));t.default=function(e,t,i){return t in e?(0,r.default)(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},YGcl:function(e,t,i){"use strict";i.r(t);var r=i("QbLZ"),s=i.n(r),a=i("YEIV"),o=i.n(a),n=i("L2JU"),l=(i("srmC"),i("qNmG"),{data:function(){return{form:{idc:"aliyun"},cmOption:{tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!1,mode:"text/x-nginx-conf",theme:"cobalt",readOnly:!1}}},created:function(){this.getApolloDetailReq(this.$route.query),this.getResoucesReq()},computed:s()({},Object(n.mapGetters)({apolloDetail:"apolloModule/filterApolloDetail",resouces:"projectModule/resouces"})),methods:s()({},Object(n.mapActions)(o()({addOrUpdateApollo:"apolloModule/addOrUpdateApollo",getApolloDetailReq:"apolloModule/getApolloDetail",getResoucesReq:"projectModule/getResouces"},"getApolloDetailReq","apolloModule/getApolloDetail")),{submitForm:function(e){this.addOrUpdateApollo(e)},addItem:function(){this.$showModal("addNameSpace")},handleSpace:function(e,t){var i=e.replace(/\n+/g,"\n");this.apolloDetail[t].content=i},getList:function(e){var t={configId:this.$route.query.configId,idc:e.idc},i={configId:this.$route.query.configId,idc:e.idc};this.getApolloDetailReq(i),this.$router.replace({query:t})}}),watch:{}}),_=i("KHd+"),c=Object(_.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("el-form",{attrs:{inline:!0,model:e.form,onsubmit:"return false"}},[i("el-form-item",{attrs:{label:"机房",prop:"idc"}},[i("el-select",{attrs:{placeholder:"请选择机房",filterable:""},on:{change:function(t){e.getList(e.form)}},model:{value:e.form.idc,callback:function(t){e.$set(e.form,"idc",t)},expression:"form.idc"}},e._l(e.resouces.platforms,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"info",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){e.addItem()}}},[e._v("添加配置")])],1)],1)],1),e._v(" "),e._l(e.apolloDetail,function(t,r){return i("div",{key:t.id},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("el-input",{staticStyle:{width:"150px"},model:{value:t.namespace,callback:function(i){e.$set(t,"namespace","string"==typeof i?i.trim():i)},expression:"item.namespace"}}),e._v("."),i("el-input",{staticStyle:{"max-width":"150px"},model:{value:t.format,callback:function(i){e.$set(t,"format","string"==typeof i?i.trim():i)},expression:"item.format"}}),e._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"mini",plain:""},on:{click:function(i){e.submitForm(t)}}},[e._v("提交修改")])],1),e._v(" "),i("div",{staticStyle:{margin:"10px 0"}},[i("span",[e._v("是否启用:")]),i("el-switch",{model:{value:t.enable,callback:function(i){e.$set(t,"enable",i)},expression:"item.enable"}})],1),e._v(" "),i("div",{staticClass:"codemirror"},[i("codemirror",{staticStyle:{"font-size":"16px"},attrs:{options:e.cmOption},on:{blur:function(i){e.handleSpace(t.content,r)}},model:{value:t.content,callback:function(i){e.$set(t,"content","string"==typeof i?i.trim():i)},expression:"item.content"}})],1)])],1)})],2)},[],!1,null,null,null).exports,u={data:function(){return{cmOption:{tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!1,mode:"text/x-nginx-conf",theme:"cobalt",readOnly:!1},form:{enable:!0,idc:"aliyun"},rules:{}}},created:function(){this.getResoucesReq()},computed:s()({},Object(n.mapGetters)({resouces:"projectModule/resouces"}),{modalIsShow:function(){return this.$isShowModal("addNameSpace")}}),methods:s()({},Object(n.mapActions)({addNameSpace:"apolloModule/addNameSpace",getResoucesReq:"projectModule/getResouces"}),{handleClose:function(){this.$refs.form.resetFields(),this.$hideModal("addNameSpace")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(t.form.configId=t.$route.query.configId,e){var i=t.$trim(s()({},t.form));t.addNameSpace(i)}})}}),watch:{}},p=(i("Iftg"),{components:{Detail:c,AddModal:Object(_.a)(u,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.modalIsShow,"before-close":e.handleClose,center:"",title:"添加NameSpace",width:"50%","close-on-click-modal":!1},on:{close:e.handleClose}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","status-icon":!0}},[i("el-row",[i("el-col",{attrs:{span:22}},[i("el-form-item",{staticClass:"namespace",attrs:{prop:"namespace",label:"命名"}},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入命名"},model:{value:e.form.namespace,callback:function(t){e.$set(e.form,"namespace",t)},expression:"form.namespace"}},[i("el-select",{attrs:{slot:"append",placeholder:"请选择格式",size:"small",filterable:""},slot:"append",model:{value:e.form.format,callback:function(t){e.$set(e.form,"format","string"==typeof t?t.trim():t)},expression:"form.format"}},e._l(e.resouces.configFormat,function(e){return i("el-option",{key:e,staticStyle:{width:"130px"},attrs:{label:e,value:e}})}))],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"enable",label:"是否启用"}},[i("el-switch",{model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable","string"==typeof t?t.trim():t)},expression:"form.enable"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"idc",label:"机房"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择机房",size:"small",filterable:""},model:{value:e.form.idc,callback:function(t){e.$set(e.form,"idc","string"==typeof t?t.trim():t)},expression:"form.idc"}},e._l(e.resouces.platforms,function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:22}},[i("el-form-item",{attrs:{prop:"content",label:"内容"}},[i("div",{staticClass:"codemirror"},[i("codemirror",{staticStyle:{"font-size":"16px"},attrs:{options:e.cmOption},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content","string"==typeof t?t.trim():t)},expression:"form.content"}})],1)])],1)],1)],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,null,null).exports},created:function(){},computed:{query:function(){return this.$route.query}},methods:s()({},Object(n.mapActions)({})),watch:{query:function(){}}}),m=Object(_.a)(p,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("detail"),this._v(" "),t("AddModal")],1)},[],!1,null,null,null);t.default=m.exports},l3n2:function(e,t,i){},qNmG:function(e,t,i){},srmC:function(e,t,i){!function(e){"use strict";e.defineMode("nginx",function(e){function t(e){for(var t={},i=e.split(" "),r=0;r<i.length;++r)t[i[r]]=!0;return t}var i,r=t("break return rewrite set accept_mutex accept_mutex_delay access_log add_after_body add_before_body add_header addition_types aio alias allow ancient_browser ancient_browser_value auth_basic auth_basic_user_file auth_http auth_http_header auth_http_timeout autoindex autoindex_exact_size autoindex_localtime charset charset_types client_body_buffer_size client_body_in_file_only client_body_in_single_buffer client_body_temp_path client_body_timeout client_header_buffer_size client_header_timeout client_max_body_size connection_pool_size create_full_put_path daemon dav_access dav_methods debug_connection debug_points default_type degradation degrade deny devpoll_changes devpoll_events directio directio_alignment empty_gif env epoll_events error_log eventport_events expires fastcgi_bind fastcgi_buffer_size fastcgi_buffers fastcgi_busy_buffers_size fastcgi_cache fastcgi_cache_key fastcgi_cache_methods fastcgi_cache_min_uses fastcgi_cache_path fastcgi_cache_use_stale fastcgi_cache_valid fastcgi_catch_stderr fastcgi_connect_timeout fastcgi_hide_header fastcgi_ignore_client_abort fastcgi_ignore_headers fastcgi_index fastcgi_intercept_errors fastcgi_max_temp_file_size fastcgi_next_upstream fastcgi_param fastcgi_pass_header fastcgi_pass_request_body fastcgi_pass_request_headers fastcgi_read_timeout fastcgi_send_lowat fastcgi_send_timeout fastcgi_split_path_info fastcgi_store fastcgi_store_access fastcgi_temp_file_write_size fastcgi_temp_path fastcgi_upstream_fail_timeout fastcgi_upstream_max_fails flv geoip_city geoip_country google_perftools_profiles gzip gzip_buffers gzip_comp_level gzip_disable gzip_hash gzip_http_version gzip_min_length gzip_no_buffer gzip_proxied gzip_static gzip_types gzip_vary gzip_window if_modified_since ignore_invalid_headers image_filter image_filter_buffer image_filter_jpeg_quality image_filter_transparency imap_auth imap_capabilities imap_client_buffer index ip_hash keepalive_requests keepalive_timeout kqueue_changes kqueue_events large_client_header_buffers limit_conn limit_conn_log_level limit_rate limit_rate_after limit_req limit_req_log_level limit_req_zone limit_zone lingering_time lingering_timeout lock_file log_format log_not_found log_subrequest map_hash_bucket_size map_hash_max_size master_process memcached_bind memcached_buffer_size memcached_connect_timeout memcached_next_upstream memcached_read_timeout memcached_send_timeout memcached_upstream_fail_timeout memcached_upstream_max_fails merge_slashes min_delete_depth modern_browser modern_browser_value msie_padding msie_refresh multi_accept open_file_cache open_file_cache_errors open_file_cache_events open_file_cache_min_uses open_file_cache_valid open_log_file_cache output_buffers override_charset perl perl_modules perl_require perl_set pid pop3_auth pop3_capabilities port_in_redirect postpone_gzipping postpone_output protocol proxy proxy_bind proxy_buffer proxy_buffer_size proxy_buffering proxy_buffers proxy_busy_buffers_size proxy_cache proxy_cache_key proxy_cache_methods proxy_cache_min_uses proxy_cache_path proxy_cache_use_stale proxy_cache_valid proxy_connect_timeout proxy_headers_hash_bucket_size proxy_headers_hash_max_size proxy_hide_header proxy_ignore_client_abort proxy_ignore_headers proxy_intercept_errors proxy_max_temp_file_size proxy_method proxy_next_upstream proxy_pass_error_message proxy_pass_header proxy_pass_request_body proxy_pass_request_headers proxy_read_timeout proxy_redirect proxy_send_lowat proxy_send_timeout proxy_set_body proxy_set_header proxy_ssl_session_reuse proxy_store proxy_store_access proxy_temp_file_write_size proxy_temp_path proxy_timeout proxy_upstream_fail_timeout proxy_upstream_max_fails random_index read_ahead real_ip_header recursive_error_pages request_pool_size reset_timedout_connection resolver resolver_timeout rewrite_log rtsig_overflow_events rtsig_overflow_test rtsig_overflow_threshold rtsig_signo satisfy secure_link_secret send_lowat send_timeout sendfile sendfile_max_chunk server_name_in_redirect server_names_hash_bucket_size server_names_hash_max_size server_tokens set_real_ip_from smtp_auth smtp_capabilities smtp_client_buffer smtp_greeting_delay so_keepalive source_charset ssi ssi_ignore_recycled_buffers ssi_min_file_chunk ssi_silent_errors ssi_types ssi_value_length ssl ssl_certificate ssl_certificate_key ssl_ciphers ssl_client_certificate ssl_crl ssl_dhparam ssl_engine ssl_prefer_server_ciphers ssl_protocols ssl_session_cache ssl_session_timeout ssl_verify_client ssl_verify_depth starttls stub_status sub_filter sub_filter_once sub_filter_types tcp_nodelay tcp_nopush thread_stack_size timeout timer_resolution types_hash_bucket_size types_hash_max_size underscores_in_headers uninitialized_variable_warn use user userid userid_domain userid_expires userid_mark userid_name userid_p3p userid_path userid_service valid_referers variables_hash_bucket_size variables_hash_max_size worker_connections worker_cpu_affinity worker_priority worker_processes worker_rlimit_core worker_rlimit_nofile worker_rlimit_sigpending worker_threads working_directory xclient xml_entities xslt_stylesheet xslt_typesdrew@li229-23"),s=t("http mail events server types location upstream charset_map limit_except if geo map"),a=t("include root server server_name listen internal proxy_pass memcached_pass fastcgi_pass try_files"),o=e.indentUnit;function n(e,t){return i=t,e}function l(e,t){e.eatWhile(/[\w\$_]/);var i=e.current();if(r.propertyIsEnumerable(i))return"keyword";if(s.propertyIsEnumerable(i))return"variable-2";if(a.propertyIsEnumerable(i))return"string-2";var o=e.next();return"@"==o?(e.eatWhile(/[\w\\\-]/),n("meta",e.current())):"/"==o&&e.eat("*")?(t.tokenize=_,_(e,t)):"<"==o&&e.eat("!")?(t.tokenize=c,c(e,t)):"="!=o?"~"!=o&&"|"!=o||!e.eat("=")?'"'==o||"'"==o?(t.tokenize=function(e){return function(t,i){for(var r,s=!1;null!=(r=t.next())&&(r!=e||s);)s=!s&&"\\"==r;return s||(i.tokenize=l),n("string","string")}}(o),t.tokenize(e,t)):"#"==o?(e.skipToEnd(),n("comment","comment")):"!"==o?(e.match(/^\s*\w*/),n("keyword","important")):/\d/.test(o)?(e.eatWhile(/[\w.%]/),n("number","unit")):/[,.+>*\/]/.test(o)?n(null,"select-op"):/[;{}:\[\]]/.test(o)?n(null,o):(e.eatWhile(/[\w\\\-]/),n("variable","variable")):n(null,"compare"):void n(null,"compare")}function _(e,t){for(var i,r=!1;null!=(i=e.next());){if(r&&"/"==i){t.tokenize=l;break}r="*"==i}return n("comment","comment")}function c(e,t){for(var i,r=0;null!=(i=e.next());){if(r>=2&&">"==i){t.tokenize=l;break}r="-"==i?r+1:0}return n("comment","comment")}return{startState:function(e){return{tokenize:l,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;i=null;var r=t.tokenize(e,t),s=t.stack[t.stack.length-1];return"hash"==i&&"rule"==s?r="atom":"variable"==r&&("rule"==s?r="number":s&&"@media{"!=s||(r="tag")),"rule"==s&&/^[\{\};]$/.test(i)&&t.stack.pop(),"{"==i?"@media"==s?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==i?t.stack.pop():"@media"==i?t.stack.push("@media"):"{"==s&&"comment"!=i&&t.stack.push("rule"),r},indent:function(e,t){var i=e.stack.length;return/^\}/.test(t)&&(i-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+i*o},electricChars:"}"}}),e.defineMIME("text/x-nginx-conf","nginx")}(i("VrN/"))}}]);