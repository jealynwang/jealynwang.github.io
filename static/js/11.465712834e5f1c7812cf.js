(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+F6t":function(t,e,o){},fqms:function(t,e,o){"use strict";o.r(e);var l=o("QbLZ"),i=o.n(l),a=o("L2JU"),n=(o("ztCB"),o("qNmG"),{data:function(){return{content:"",cmOption:{tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!1,mode:"text/x-yaml",theme:"cobalt",readOnly:!0}}},computed:i()({},Object(a.mapGetters)({modList:"modModule/filterModList",pagination:"modModule/pagination"})),methods:i()({},Object(a.mapActions)({getDetail:"modModule/getSaltModDetail"}),{handleDisplayContent:function(t){this.content=t.content,this.$showModal("saltModContent")},handleCloseModal:function(){this.$hideModal("saltModContent"),this.content=""},handleEdit:function(t){this.getDetail(t),this.$showModal("updateSaltMod")}})}),r=o("KHd+"),s=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$isShowLoading("modList"),expression:"$isShowLoading('modList')"}]},[o("el-table",{attrs:{data:t.modList,border:""}},[o("el-table-column",{attrs:{prop:"name",label:"模板名称"}}),t._v(" "),o("el-table-column",{attrs:{label:"模板内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){t.handleDisplayContent(e.row)}}},[t._v("查看")])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"description",label:"说明"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),o("table-pagination",{attrs:{pagination:t.pagination}}),t._v(" "),o("el-dialog",{attrs:{title:"模板内容",visible:t.$isShowModal("saltModContent"),width:"80%",top:"5vh"},on:{close:t.handleCloseModal}},[o("div",{staticClass:"codemirror"},[o("codemirror",{attrs:{options:t.cmOption},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])],1)},[],!1,null,null,null).exports,d={data:function(){return{saltModForm:{id:"",name:"",content:"",description:"",frame:null},filterFrame:[{name:"Java",id:1},{name:"Vue",id:2},{name:"PHP",id:3}],cmOption:{tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!1,mode:"text/x-yaml",theme:"cobalt"},rules:{}}},created:function(){},computed:i()({},Object(a.mapGetters)({filterDetail:"modModule/filterSaltModDetail"}),{isUpdate:function(){return this.$isShowModal("updateSaltMod")},title:function(){return this.isUpdate?"编辑模板":"添加模板"},modalIsShow:function(){return this.$isShowModal("addSaltMod")||this.$isShowModal("updateSaltMod")}}),methods:i()({},Object(a.mapActions)({addOrUpdateSaltMod:"saltNodeModule/addOrUpdateSaltMod"}),{handleClose:function(){this.$refs.saltModForm.resetFields(),this.isUpdate?this.$hideModal("updateSaltMod"):this.$hideModal("addSaltMod")},setValue:function(){var t=this.filterDetail,e=t.id,o=t.name,l=t.content,i=t.modKey,a=t.description,n=t.frame;this.saltModForm={id:e,name:o,content:l,modKey:i,description:a,frame:n}},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var o=e.$trim(i()({},e.saltModForm));e.isUpdate||delete o.id,console.log(o)}})}}),watch:{filterDetail:function(){this.isUpdate&&this.setValue()}}},c=(o("wGkQ"),Object(r.a)(d,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{staticStyle:{height:"100%"},attrs:{visible:t.modalIsShow,"before-close":t.handleClose,center:"",title:t.title,width:"45%",top:"0"},on:{close:t.handleClose}},[o("el-form",{ref:"saltModForm",attrs:{model:t.saltModForm,rules:t.rules,"label-width":"68px","status-icon":!0}},[o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{prop:"name",label:"模板名称",size:"small"}},[o("el-input",{attrs:{placeholder:"请输入模板名称",maxlength:50},model:{value:t.saltModForm.name,callback:function(e){t.$set(t.saltModForm,"name","string"==typeof e?e.trim():e)},expression:"saltModForm.name"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{prop:"modKey",label:"modKey",size:"small"}},[o("el-input",{attrs:{placeholder:"请输入SLS模块名称",maxlength:50},model:{value:t.saltModForm.modKey,callback:function(e){t.$set(t.saltModForm,"modKey","string"==typeof e?e.trim():e)},expression:"saltModForm.modKey"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{label:"模板语言",prop:"frame"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择模板语言",size:"small",filterable:""},model:{value:t.saltModForm.frame,callback:function(e){t.$set(t.saltModForm,"frame","string"==typeof e?e.trim():e)},expression:"saltModForm.frame"}},t._l(t.filterFrame,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{prop:"description",label:"说明",size:"small"}},[o("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入模板描述"},model:{value:t.saltModForm.description,callback:function(e){t.$set(t.saltModForm,"description","string"==typeof e?e.trim():e)},expression:"saltModForm.description"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{prop:"content",label:"模板内容",size:"small"}},[o("div",{staticClass:"codemirror"},[o("codemirror",{attrs:{options:t.cmOption},model:{value:t.saltModForm.content,callback:function(e){t.$set(t.saltModForm,"content",e)},expression:"saltModForm.content"}})],1)])],1)],1)],1),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small",loading:t.$isShowLoading("saltModAddOrUpdate")},on:{click:function(e){t.submitForm("saltModForm")}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null).exports),m={data:function(){return{form:{}}},computed:i()({},Object(a.mapGetters)({filterModSelect:"modModule/filterSaltModSelect"})),methods:i()({},Object(a.mapActions)({getModListReq:"modModule/getModList"}),{getList:function(){var t=this.$formatSearchData(this.form);this.getModListReq(t),this.$router.replace({query:t})}})},u={components:{Search:Object(r.a)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticClass:"query-form",attrs:{shadow:"never"}},[o("el-form",{attrs:{inline:!0,"label-width":"80px",model:t.form,onsubmit:"return false"}},[o("el-form-item",{attrs:{label:"选择模板"}},[o("el-select",{attrs:{placeholder:"请选择模板",clearable:""},model:{value:t.form.modKey,callback:function(e){t.$set(t.form,"modKey","string"==typeof e?e.trim():e)},expression:"form.modKey"}},t._l(t.filterModSelect,function(t){return o("el-option",{key:t.modKey,attrs:{label:t.name,value:t.modKey}})}))],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(e){t.getList(t.form)}}},[t._v("查询")])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"info",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(e){t.$showModal("addSaltMod")}}},[t._v("新建")])],1)],1)],1)},[],!1,null,null,null).exports,List:s,Modal:c},created:function(){this.getModList(),this.getModSelectReq()},computed:{query:function(){return this.$route.query}},methods:i()({},Object(a.mapActions)({getModListReq:"modModule/getModList",getModSelectReq:"modModule/getModSelect"}),{getModList:function(){this.getModListReq(this.query)}}),watch:{query:function(){this.getModList()}}},f=Object(r.a)(u,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Search"),this._v(" "),e("List"),this._v(" "),e("Modal")],1)},[],!1,null,null,null);e.default=f.exports},qNmG:function(t,e,o){},wGkQ:function(t,e,o){"use strict";var l=o("+F6t");o.n(l).a},ztCB:function(t,e,o){!function(t){"use strict";t.defineMode("yaml",function(){var t=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i");return{token:function(e,o){var l=e.peek(),i=o.escaped;if(o.escaped=!1,"#"==l&&(0==e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(e.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(o.literal&&e.indentation()>o.keyCol)return e.skipToEnd(),"string";if(o.literal&&(o.literal=!1),e.sol()){if(o.keyCol=0,o.pair=!1,o.pairStart=!1,e.match(/---/))return"def";if(e.match(/\.\.\./))return"def";if(e.match(/\s*-\s+/))return"meta"}if(e.match(/^(\{|\}|\[|\])/))return"{"==l?o.inlinePairs++:"}"==l?o.inlinePairs--:"["==l?o.inlineList++:o.inlineList--,"meta";if(o.inlineList>0&&!i&&","==l)return e.next(),"meta";if(o.inlinePairs>0&&!i&&","==l)return o.keyCol=0,o.pair=!1,o.pairStart=!1,e.next(),"meta";if(o.pairStart){if(e.match(/^\s*(\||\>)\s*/))return o.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==o.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(o.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(t))return"keyword"}return!o.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(o.pair=!0,o.keyCol=e.indentation(),"atom"):o.pair&&e.match(/^:\s*/)?(o.pairStart=!0,"meta"):(o.pairStart=!1,o.escaped="\\"==l,e.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},lineComment:"#",fold:"indent"}}),t.defineMIME("text/x-yaml","yaml"),t.defineMIME("text/yaml","yaml")}(o("VrN/"))}}]);