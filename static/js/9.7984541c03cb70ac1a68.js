(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"0Qo1":function(t,e,o){"use strict";o.r(e);var r=o("QbLZ"),i=o.n(r),s=o("L2JU"),l={computed:i()({},Object(s.mapGetters)({groupList:"groupModule/filterGroupList",pagination:"groupModule/pagination"})),methods:i()({},Object(s.mapActions)({getGroupDetailReq:"groupModule/getgroupDetail"}),{handleEdit:function(t){this.$showModal("updateGroup"),this.getGroupDetailReq(t)}})},a=o("KHd+"),n=Object(a.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$isShowLoading("groupList"),expression:"$isShowLoading('groupList')"}]},[o("el-table",{attrs:{data:t.groupList,border:""}},[o("el-table-column",{attrs:{prop:"name",label:"分组名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"description",label:"说明"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){t.handleEdit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),o("table-pagination",{attrs:{pagination:t.pagination}})],1)},[],!1,null,null,null).exports,u={data:function(){return{hosts:[],groupForm:{id:"",groupId:"",name:"",description:""},rules:{name:[{required:!0,message:"请输入分组名称",trigger:"blur"}]}}},created:function(){this.getHostListReq({currentPage:1,pageSize:1e3})},computed:i()({},Object(s.mapGetters)({groupDetail:"groupModule/filterGroupDetail",hostList:"hostModule/filterHostList"}),{title:function(){return this.$isShowModal("updateGroup")?"更新分组":"添加分组"},modalIsShow:function(){return this.$isShowModal("addGroup")||this.$isShowModal("updateGroup")},isUpdate:function(){return this.$isShowModal("updateGroup")}}),methods:i()({},Object(s.mapActions)({addOrUpdateGroup:"groupModule/addOrUpdateGroup",getHostListReq:"hostModule/getHostList"}),{handleClose:function(){this.hosts=[],this.$refs.groupForm.resetFields(),this.isUpdate?this.$hideModal("updateGroup"):this.$hideModal("addGroup")},setValue:function(){var t=this,e=this.groupDetail,o=e.id,r=e.groupId,i=e.name,s=e.description;this.groupForm={id:o,groupId:r,name:i,description:s},this.groupDetail.hosts.map(function(e){t.hosts.push(e.hostId)})},filterMethod:function(t,e){return e.name.indexOf(t)>-1},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var o=e.$trim(i()({},e.groupForm,{hosts:e.hosts,envId:"test"}));e.isUpdate||delete o.id,e.addOrUpdateGroup(o)}})}}),watch:{groupDetail:function(){this.setValue()}}},p=Object(a.a)(u,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{visible:t.modalIsShow,"before-close":t.handleClose,center:"",title:t.title,width:"45%"},on:{close:t.handleClose}},[o("el-form",{ref:"groupForm",attrs:{model:t.groupForm,rules:t.rules,"label-width":"68px","status-icon":!0}},[o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{prop:"name",label:"名称",size:"small"}},[o("el-input",{attrs:{placeholder:"请输入分组名称",maxlength:50},model:{value:t.groupForm.name,callback:function(e){t.$set(t.groupForm,"name","string"==typeof e?e.trim():e)},expression:"groupForm.name"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:22}},[o("el-form-item",{attrs:{prop:"description",label:"说明",size:"small"}},[o("el-input",{attrs:{type:"textarea",rows:"2",placeholder:"请填写关于该分组的描述信息",maxlength:50},model:{value:t.groupForm.description,callback:function(e){t.$set(t.groupForm,"description","string"==typeof e?e.trim():e)},expression:"groupForm.description"}})],1)],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:20,offset:4}},[o("el-transfer",{attrs:{titles:["可选","已选"],filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入名称",props:{key:"hostId",label:"name"},data:t.hostList},model:{value:t.hosts,callback:function(e){t.hosts=e},expression:"hosts"}})],1)],1),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small",loading:t.$isShowLoading("groupAddOrUpdate")},on:{click:function(e){t.submitForm("groupForm")}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null).exports,d={data:function(){this.$route.query.name;return{form:{}}},methods:i()({},Object(s.mapActions)({getGroupListReq:"groupModule/getGroupList"}),{getList:function(){var t=this.$formatSearchData(this.form);this.getGroupListReq(t),this.$router.replace({query:t})}})},c={components:{List:n,Modal:p,Search:Object(a.a)(d,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticClass:"query-form",attrs:{shadow:"never"}},[o("el-form",{attrs:{inline:!0,"label-width":"80px",model:t.form,onsubmit:"return false"}},[o("el-form-item",{attrs:{label:"分组名称"}},[o("el-input",{attrs:{placeholder:"请输入分组名称",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"==typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(e){t.getList(t.form)}}},[t._v("查询")])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"info",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(e){t.$showModal("addGroup")}}},[t._v("新建")])],1)],1)],1)},[],!1,null,null,null).exports},created:function(){this.getGroupList()},computed:{query:function(){return this.$route.query}},methods:i()({},Object(s.mapActions)({getGroupListReq:"groupModule/getGroupList"}),{getGroupList:function(){this.getGroupListReq(this.query)}}),watch:{query:function(){this.getGroupList()}}},m=Object(a.a)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("search"),this._v(" "),e("list"),this._v(" "),e("modal")],1)},[],!1,null,null,null);e.default=m.exports}}]);