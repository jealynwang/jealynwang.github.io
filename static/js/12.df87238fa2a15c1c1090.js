(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+iuc":function(e,t,r){r("wgeU"),r("FlQf"),r("bBy9"),r("B9jh"),r("dL40"),r("xvv9"),r("V+O7"),e.exports=r("WEpk").Set},"6/1s":function(e,t,r){e.exports=r("974F")(171)},"8iia":function(e,t,r){var i=r("QMMT"),o=r("RRc/");e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},AyEe:function(e,t,r){"use strict";var i=r("dZDr");r.n(i).a},B9jh:function(e,t,r){"use strict";var i=r("Wu5q"),o=r("n3ko");e.exports=r("raTm")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(o(this,"Set"),e=0===e?0:e,e)}},i)},C2SN:function(e,t,r){var i=r("93I4"),o=r("kAMH"),s=r("UWiX")("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),i(t)&&null===(t=t[s])&&(t=void 0)),void 0===t?Array:t}},M1xp:function(e,t,r){e.exports=r("974F")(71)},MPFp:function(e,t,r){e.exports=r("974F")(74)},"RRc/":function(e,t,r){var i=r("oioR");e.exports=function(e,t){var r=[];return i(e,!1,r.push,r,t),r}},UO39:function(e,t,r){e.exports=r("974F")(167)},"V+O7":function(e,t,r){r("aPfg")("Set")},V7Et:function(e,t,r){var i=r("2GTP"),o=r("M1xp"),s=r("JB68"),n=r("tEej"),a=r("v6xn");e.exports=function(e,t){var r=1==e,l=2==e,c=3==e,p=4==e,d=6==e,u=5==e||d,_=t||a;return function(t,a,m){for(var f,v,h=s(t),g=o(h),x=i(a,m,3),w=n(g.length),y=0,b=r?_(t,w):l?_(t,0):void 0;w>y;y++)if((u||y in g)&&(v=x(f=g[y],y,h),e))if(r)b[y]=v;else if(v)switch(e){case 3:return!0;case 5:return f;case 6:return y;case 2:b.push(f)}else if(p)return!1;return d?-1:c||p?p:b}}},Wu5q:function(e,t,r){"use strict";var i=r("2faE").f,o=r("oVml"),s=r("XJU/"),n=r("2GTP"),a=r("EXMj"),l=r("oioR"),c=r("MPFp"),p=r("UO39"),d=r("TJWN"),u=r("jmDH"),_=r("6/1s").fastKey,m=r("n3ko"),f=u?"_s":"size",v=function(e,t){var r,i=_(t);if("F"!==i)return e._i[i];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var p=e(function(e,i){a(e,p,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[f]=0,void 0!=i&&l(i,r,e[c],e)});return s(p.prototype,{clear:function(){for(var e=m(this,t),r=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete r[i.i];e._f=e._l=void 0,e[f]=0},delete:function(e){var r=m(this,t),i=v(r,e);if(i){var o=i.n,s=i.p;delete r._i[i.i],i.r=!0,s&&(s.n=o),o&&(o.p=s),r._f==i&&(r._f=o),r._l==i&&(r._l=s),r[f]--}return!!i},forEach:function(e){m(this,t);for(var r,i=n(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(i(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(m(this,t),e)}}),u&&i(p.prototype,"size",{get:function(){return m(this,t)[f]}}),p},def:function(e,t,r){var i,o,s=v(e,t);return s?s.v=r:(e._l=s={i:o=_(t,!0),k:t,v:r,p:i=e._l,n:void 0,r:!1},e._f||(e._f=s),i&&(i.n=s),e[f]++,"F"!==o&&(e._i[o]=s)),e},getEntry:v,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=m(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?p(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,p(1))},r?"entries":"values",!r,!0),d(t)}}},XMtl:function(e,t,r){"use strict";r.r(t);var i=r("L2JU"),o=r("jWXv"),s=r.n(o),n=r("QbLZ"),a=r.n(n),l=(r("srmC"),r("qNmG"),r("XJYT")),c=r("p46w"),p=r.n(c),d={data:function(){var e=this;return{headers:{token:encodeURIComponent(p.a.get("GM_TOKEN")||""),appId:"0407296056293301"},validate:!1,versionForm:{approve:!1,approverList:"",versionBuild:[{projectId:"",commit:"",gitTag:"",gitBranch:"",configUpdate:!1,configInfo:"",sqlUpdate:!1,sqlUrl:"",sqlInfo:"",versionCode:"",nginxUpdate:!1,hasApollo:!1,nginxContent:"",deployImmediately:!1,modId:"",groupId:"",hostList:"",deployDir:"",logDir:"",nginxName:""}]},cmOption:{tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!1,mode:"text/x-nginx-conf",theme:"cobalt",readOnly:!0},rules:{approverList:[{validator:function(t,r,i){e.versionForm.approve&&!r?i(new Error("请选择审核人")):i()},trigger:"blur"}]}}},created:function(){this.getResoucesReq(),this.getClusterListReq({currentPage:1,pageSize:1e3}),this.handleSelectMod(),this.handleSelectGroup(),this.getProjectList({currentPage:1,pageSize:1e3})},computed:a()({},Object(i.mapState)({status:function(e){return e.operationModule.status}}),Object(i.mapGetters)({filterClusterList:"clusterModule/filterClusterList",filterProjectList:"projectModule/filterProjectList",filterHostList:"hostModule/filterHostList",filterProjectDetail:"projectModule/filterProjectDetail",filterModList:"modModule/filterModList",filterGroupList:"groupModule/filterGroupList",resouces:"projectModule/resouces",filterApprove:"deployModule/filterApproveList"})),methods:a()({},Object(i.mapActions)({getClusterListReq:"clusterModule/getClusterList",getProjectList:"projectModule/getProjectList",getProjectDetailReq:"projectModule/getProjectDetail",buildVersionReq:"operationModule/addbuildVersion",getHostListReq:"hostModule/getHostList",getModListReq:"modModule/getModList",getGroupListReq:"groupModule/getGroupList",getResoucesReq:"projectModule/getResouces",getApproveList:"deployModule/getApproveList"}),{deleteRow:function(e,t){t.splice(e,1)},addRow:function(e,t,r){this.$refs[e].validate(function(e){e&&t.unshift({projectId:"",commit:"",gitTag:"",gitBranch:"",configUpdate:!1,configInfo:"",sqlUpdate:!1,sqlUrl:"",sqlInfo:"",versionCode:"",nginxUpdate:!1,hasApollo:!1,nginxContent:"",deployImmediately:!1,modId:"",groupId:"",hostList:[],deployDir:"",logDir:"",nginxName:""})})},handleNginxChange:function(e){this.cmOption.readOnly=!e},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=[];if(t.versionForm.versionBuild.map(function(e){r.push(e.approve);var t=e.gitTagOrBranches;0===t.search(/^v\d/g)?(e.gitTag=t,e.gitBranch=""):(e.gitBranch=t,e.gitTag=""),e.versionCode=e.versionCode.replace(/\s/g,"")}),new s.a(r).size>1)return l.Notification.error({title:"错误",message:"请选择具有相同审核权限的项目！"}),!1;var i=t.versionForm.approve?t.versionForm.approverList.split("+"):"",o=""===i?"":i[0].trim(),n=""===i?"":i[1].trim(),c=t.$trim(a()({approverUid:o,approveBy:n},t.versionForm));t.buildVersionReq(c).then(function(){t.$store.state.operationModule.status&&t.$router.push("/deployCenter/version/index")})}})},handleClusterChange:function(e){this.getProjectList({clusterId:e,pageSize:1e3,currentPage:1})},handleProjectChange:function(e,t){var r=this,i={projectId:e};this.getProjectDetailReq(i).then(function(){r.versionForm.versionBuild[t].nginxContent=r.filterProjectDetail.nginxContent||"",r.versionForm.versionBuild[t].configUpdate=!1,r.versionForm.versionBuild[t].approve=r.filterProjectDetail.approve,r.versionForm.versionBuild.length>1&&r.versionForm.versionBuild[t].approve!==r.versionForm.approve?l.Notification.error({title:"错误",message:"请选择具有相同审核权限的项目！"}):r.versionForm.approve=!!r.filterProjectDetail.approve,r.versionForm.versionBuild[t].approve&&(r.versionForm.versionBuild[t].deployImmediately=!1,r.versionForm.versionBuild[t].nginxUpdate=!1,r.getApproveList({rid:r.resouces.approveUid})),r.versionForm.versionBuild[t].hasApollo=!!r.filterProjectDetail.configName.trim(),r.versionForm.versionBuild[t].logDir=r.filterProjectDetail.pillar.DIR_LOGS,r.versionForm.versionBuild[t].deployDir=r.filterProjectDetail.pillar.DIR_WWW,r.versionForm.versionBuild[t].nginxName=r.filterProjectDetail.pillar.NGINX_NAME,r.versionForm.versionBuild[t].groupId=r.filterProjectDetail.defaultGroupId,r.versionForm.versionBuild[t].modId=r.filterProjectDetail.modId})},handleSelectHost:function(){this.getHostListReq({pageSize:1e3,currentPage:1})},handleSelectMod:function(){this.getModListReq({pageSize:1e3,currentPage:1})},handleSelectGroup:function(){this.getGroupListReq({pageSize:1e3,currentPage:1})},handleTagChange:function(e,t,r){for(var i=0;i<e.length;i++)e[i].name===this.versionForm.versionBuild[r].gitTagOrBranches&&(this.versionForm.versionBuild[r].commit=e[i].commit.message,this.versionForm.versionBuild[r].commitId=e[i].commit.id,this.versionForm.versionBuild[r].versionCode=this.versionForm.versionBuild[r].gitTagOrBranches);for(var o=0;o<t.length;o++)t[o].name===this.versionForm.versionBuild[r].gitTagOrBranches&&(this.versionForm.versionBuild[r].commitId=t[o].commit.id,this.versionForm.versionBuild[r].commit=t[o].commit.message,this.versionForm.versionBuild[r].versionCode="v-"+Math.random().toString(18).substr(10));this.versionForm.versionBuild[r].projectId=this.versionForm.versionBuild[r].projectId},handleUploadOk:function(e,t,r){this.versionForm.versionBuild[0].sqlUrl=e.data}}),watch:{}},u=(r("AyEe"),r("KHd+")),_={components:{Form:Object(u.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticStyle:{width:"100%",margin:"0 auto"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-plus"},on:{click:function(t){e.addRow("versionForm",e.versionForm.versionBuild)}}},[e._v(" 新增 ")]),e._v(" "),r("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-upload",plain:"",size:"small"},on:{click:function(t){e.handleSubmit("versionForm")}}},[e._v(" 提交 ")])],1),e._v(" "),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.$isShowLoading("versionForm"),expression:"$isShowLoading('versionForm')"}],ref:"versionForm",attrs:{model:e.versionForm,rules:e.rules,"label-position":"right",size:"small","element-loading-text":"正在提交中..."}},[e.versionForm.approve?r("el-form-item",{staticClass:"approverList",staticStyle:{position:"absolute",left:"250px",top:"155px",width:"300px"},attrs:{label:"审核人",prop:"approverList"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择审核人",serachable:""},model:{value:e.versionForm.approverList,callback:function(t){e.$set(e.versionForm,"approverList","string"==typeof t?t.trim():t)},expression:"versionForm.approverList"}},e._l(e.filterApprove,function(e){return r("el-option",{key:e.uid,staticStyle:{"max-width":"100%"},attrs:{label:e.user_name+" ("+e.cn_name+")",value:e.uid+"+"+e.cn_name}})}))],1):e._e(),e._v(" "),r("el-table",{attrs:{border:"",data:e.versionForm.versionBuild,"default-expand-all":""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{attrs:{gutter:60}},[r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.deployImmediately,expression:"scope.row.deployImmediately"}],attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".groupId","label-width":"80px",label:"服务器组"}},[r("el-select",{attrs:{filterable:"",clearable:"",disabled:!t.row.deployImmediately,placeholder:"请选择目标服务器组"},model:{value:t.row.groupId,callback:function(r){e.$set(t.row,"groupId","string"==typeof r?r.trim():r)},expression:"scope.row.groupId"}},e._l(e.filterGroupList,function(e){return r("el-option",{key:e.groupId,staticStyle:{"max-width":"100%"},attrs:{label:e.name,value:e.groupId}})}))],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.deployImmediately,expression:"scope.row.deployImmediately"}],attrs:{span:6}},[r("el-form-item",{attrs:{label:"部署模板","label-width":"68px",prop:"versionBuild."+t.$index+".modId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!t.row.deployImmediately,placeholder:"请选择部署模板",serachable:"",filterable:""},model:{value:t.row.modId,callback:function(r){e.$set(t.row,"modId","string"==typeof r?r.trim():r)},expression:"scope.row.modId"}},e._l(e.filterModList,function(e){return r("el-option",{key:e.id,staticStyle:{"max-width":"100%"},attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.deployImmediately,expression:"scope.row.deployImmediately"}],attrs:{span:6}},[r("el-form-item",{attrs:{label:"服务器","label-width":"68px",prop:"versionBuild."+t.$index+".hostList"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",disabled:!t.row.deployImmediately,multiple:"",placeholder:"请选择部署服务器"},on:{focus:function(t){e.handleSelectHost()}},model:{value:t.row.hostList,callback:function(r){e.$set(t.row,"hostList","string"==typeof r?r.trim():r)},expression:"scope.row.hostList"}},e._l(e.filterHostList,function(e){return r("el-option",{key:e.hostId,staticStyle:{"max-width":"100%"},attrs:{label:e.name+" "+e.privateIp,value:e.hostId}})}))],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:60}},[r("el-col",{attrs:{span:3}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".sqlUpdate","label-width":"80px",label:"升库"}},[r("el-switch",{model:{value:t.row.sqlUpdate,callback:function(r){e.$set(t.row,"sqlUpdate","string"==typeof r?r.trim():r)},expression:"scope.row.sqlUpdate"}})],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.sqlUpdate,expression:"scope.row.sqlUpdate"}],attrs:{span:3}},[r("el-form-item",[r("el-upload",{staticClass:"uploadSql",attrs:{disabled:!t.row.sqlUpdate,"with-credentials":!0,headers:e.headers,limit:1,"on-success":e.handleUploadOk,action:"/apis/version/operation/upload"}},[r("el-button",{attrs:{disabled:!t.row.sqlUpdate,type:"text"}},[e._v("上传SQL")])],1)],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.sqlUpdate,expression:"scope.row.sqlUpdate"}],attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".sqlUrl",label:"sql地址","label-width":"68px"}},[r("el-input",{attrs:{disabled:""},model:{value:t.row.sqlUrl,callback:function(r){e.$set(t.row,"sqlUrl","string"==typeof r?r.trim():r)},expression:"scope.row.sqlUrl"}})],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.sqlUpdate,expression:"scope.row.sqlUpdate"}],attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".sqlInfo",label:"升库说明","label-width":"68px"}},[r("el-input",{attrs:{disabled:!t.row.sqlUpdate},model:{value:t.row.sqlInfo,callback:function(r){e.$set(t.row,"sqlInfo","string"==typeof r?r.trim():r)},expression:"scope.row.sqlInfo"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:60}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".configUpdate","label-width":"80px",label:"配置更新"}},[r("el-switch",{attrs:{disabled:!t.row.hasApollo},model:{value:t.row.configUpdate,callback:function(r){e.$set(t.row,"configUpdate","string"==typeof r?r.trim():r)},expression:"scope.row.configUpdate"}})],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.configUpdate,expression:"scope.row.configUpdate"}],attrs:{span:18}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".configInfo","label-width":"68px",label:"配置说明"}},[r("el-input",{staticClass:"disabled-text",attrs:{disabled:!t.row.configUpdate,placeholder:""},model:{value:t.row.configInfo,callback:function(r){e.$set(t.row,"configInfo","string"==typeof r?r.trim():r)},expression:"scope.row.configInfo"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:60}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".nginxUpdate",label:"更新Nginx"}},[r("el-switch",{attrs:{disabled:e.versionForm.approve},on:{change:function(r){e.handleNginxChange(t.row.nginxUpdate)}},model:{value:t.row.nginxUpdate,callback:function(r){e.$set(t.row,"nginxUpdate","string"==typeof r?r.trim():r)},expression:"scope.row.nginxUpdate"}}),e._v(" "),r("el-popover",{attrs:{placement:"right",width:"200",trigger:"hover",content:"首次配置，请开启Nginx更新！"}},[r("span",{staticClass:"nginx-info el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.nginxUpdate,expression:"scope.row.nginxUpdate"}],attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".logDir","label-width":"68px",label:"日志路径"}},[r("el-input",{staticClass:"disabled-text",attrs:{disabled:""},model:{value:t.row.logDir,callback:function(r){e.$set(t.row,"logDir","string"==typeof r?r.trim():r)},expression:"scope.row.logDir"}})],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.nginxUpdate,expression:"scope.row.nginxUpdate"}],attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".deployDir","label-width":"68px",label:"部署路径"}},[r("el-input",{staticClass:"disabled-text",attrs:{disabled:""},model:{value:t.row.deployDir,callback:function(r){e.$set(t.row,"deployDir","string"==typeof r?r.trim():r)},expression:"scope.row.deployDir"}})],1)],1),e._v(" "),r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.nginxUpdate,expression:"scope.row.nginxUpdate"}],attrs:{span:6}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".nginxName","label-width":"68px",label:"配置名称"}},[r("el-input",{staticClass:"disabled-text",attrs:{disabled:""},model:{value:t.row.nginxName,callback:function(r){e.$set(t.row,"nginxName","string"==typeof r?r.trim():r)},expression:"scope.row.nginxName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{directives:[{name:"show",rawName:"v-show",value:t.row.nginxUpdate,expression:"scope.row.nginxUpdate"}],attrs:{span:24}},[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".nginxContent",label:"Nginx配置"}},[r("div",{staticClass:"codemirror"},[r("codemirror",{attrs:{options:e.cmOption},model:{value:t.row.nginxContent,callback:function(r){e.$set(t.row,"nginxContent",r)},expression:"scope.row.nginxContent"}})],1)])],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"clusterId",label:"业务名称",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".clusterId"}},[r("el-select",{staticClass:"full-width",attrs:{filterable:"",placeholder:"请选择业务名称",serachable:""},on:{change:function(r){e.handleClusterChange(t.row.clusterId)}},model:{value:t.row.clusterId,callback:function(r){e.$set(t.row,"clusterId","string"==typeof r?r.trim():r)},expression:"scope.row.clusterId"}},e._l(e.filterClusterList,function(e){return r("el-option",{key:e.clusterId,staticStyle:{"max-width":"100%"},attrs:{label:e.business,value:e.clusterId}})}))],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"项目名称",prop:"projectId"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".projectId",rules:{required:!0,message:"请选择项目名称",trigger:"blur"}}},[r("el-select",{staticClass:"full-width",attrs:{filterable:"",placeholder:"请选择项目名称",serachable:""},on:{change:function(r){e.handleProjectChange(t.row.projectId,t.$index)}},model:{value:t.row.projectId,callback:function(r){e.$set(t.row,"projectId","string"==typeof r?r.trim():r)},expression:"scope.row.projectId"}},e._l(e.filterProjectList,function(t){return r("el-option",{key:t.projectId,staticStyle:{"max-width":"100%"},attrs:{label:t.name,value:t.projectId}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.approve?"审核开启":"审核关闭"))])])}))],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"分支/tag",prop:"gitTagOrBranches",width:"240px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".gitTagOrBranches",rules:{required:!0,message:"请选择Tag或分支",trigger:"blur"}}},[r("el-select",{staticClass:"full-width",attrs:{placeholder:"请选择目标Tag或者分支",filterable:""},on:{change:function(r){e.handleTagChange(e.filterProjectDetail.tags,e.filterProjectDetail.branches,t.$index)}},model:{value:t.row.gitTagOrBranches,callback:function(r){e.$set(t.row,"gitTagOrBranches","string"==typeof r?r.trim():r)},expression:"scope.row.gitTagOrBranches"}},[e.filterProjectDetail.tags?r("el-option-group",{key:"tags",staticStyle:{"max-width":"100%"},attrs:{label:"标签"}},e._l(e.filterProjectDetail.tags,function(e){return r("el-option",{key:e.name,staticStyle:{"max-width":"100%"},attrs:{label:e.name,value:e.name}})})):e._e(),e._v(" "),e.filterProjectDetail.branches?r("el-option-group",{key:"branches",staticStyle:{"max-width":"100%"},attrs:{label:"分支"}},e._l(e.filterProjectDetail.branches,function(e){return r("el-option",{key:e.name,staticStyle:{"max-width":"100%"},attrs:{label:e.name,value:e.name}})})):e._e()],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"versionCode",width:"140px",label:"版本号"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".versionCode",rules:{required:!0,message:"请输入版本号",trigger:"blur"}}},[r("el-input",{attrs:{placeholder:"请输入版本号"},model:{value:t.row.versionCode,callback:function(r){e.$set(t.row,"versionCode",r)},expression:"scope.row.versionCode"}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"commitId",label:"commit id",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".commitId"}},[r("el-input",{attrs:{type:"textarea",autosize:"",disabled:""},model:{value:t.row.commitId,callback:function(r){e.$set(t.row,"commitId",r)},expression:"scope.row.commitId"}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"commit",label:"更新内容",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".commit"}},[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入更新内容"},model:{value:t.row.commit,callback:function(r){e.$set(t.row,"commit",r)},expression:"scope.row.commit"}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"deployImmediately",label:"立即部署",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"versionBuild."+t.$index+".deployImmediately"}},[r("el-switch",{attrs:{disabled:e.versionForm.approve},model:{value:t.row.deployImmediately,callback:function(r){e.$set(t.row,"deployImmediately","string"==typeof r?r.trim():r)},expression:"scope.row.deployImmediately"}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"small"},nativeOn:{click:function(r){r.preventDefault(),e.deleteRow(t.$index,e.versionForm.versionBuild)}}},[e._v(" 移除 ")])],1)]}}])})],1)],1)],1)],1)},[],!1,null,null,null).exports},created:function(){},computed:{},methods:{},watch:{}},m=Object(u.a)(_,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Form")],1)},[],!1,null,null,null);t.default=m.exports},aPfg:function(e,t,r){"use strict";var i=r("Y7ZC"),o=r("eaoh"),s=r("2GTP"),n=r("oioR");e.exports=function(e){i(i.S,e,{from:function(e){var t,r,i,a,l=arguments[1];return o(this),(t=void 0!==l)&&o(l),void 0==e?new this:(r=[],t?(i=0,a=s(l,arguments[2],2),n(e,!1,function(e){r.push(a(e,i++))})):n(e,!1,r.push,r),new this(r))}})}},cHUd:function(e,t,r){"use strict";var i=r("Y7ZC");e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},dL40:function(e,t,r){var i=r("Y7ZC");i(i.P+i.R,"Set",{toJSON:r("8iia")("Set")})},dZDr:function(e,t,r){},jWXv:function(e,t,r){e.exports={default:r("+iuc"),__esModule:!0}},kAMH:function(e,t,r){e.exports=r("974F")(173)},n3ko:function(e,t,r){var i=r("93I4");e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},oVml:function(e,t,r){e.exports=r("974F")(76)},qNmG:function(e,t,r){},raTm:function(e,t,r){"use strict";var i=r("5T2Y"),o=r("Y7ZC"),s=r("6/1s"),n=r("KUxP"),a=r("NegM"),l=r("XJU/"),c=r("oioR"),p=r("EXMj"),d=r("93I4"),u=r("RfKB"),_=r("2faE").f,m=r("V7Et")(0),f=r("jmDH");e.exports=function(e,t,r,v,h,g){var x=i[e],w=x,y=h?"set":"add",b=w&&w.prototype,k={};return f&&"function"==typeof w&&(g||b.forEach&&!n(function(){(new w).entries().next()}))?(w=t(function(t,r){p(t,w,e,"_c"),t._c=new x,void 0!=r&&c(r,h,t[y],t)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in b&&(!g||"clear"!=e)&&a(w.prototype,e,function(r,i){if(p(this,w,e),!t&&g&&!d(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,i);return t?this:o})}),g||_(w.prototype,"size",{get:function(){return this._c.size}})):(w=v.getConstructor(t,e,h,y),l(w.prototype,r),s.NEED=!0),u(w,e),k[e]=w,o(o.G+o.W+o.F,k),g||v.setStrong(w,e,h),w}},srmC:function(e,t,r){!function(e){"use strict";e.defineMode("nginx",function(e){function t(e){for(var t={},r=e.split(" "),i=0;i<r.length;++i)t[r[i]]=!0;return t}var r,i=t("break return rewrite set accept_mutex accept_mutex_delay access_log add_after_body add_before_body add_header addition_types aio alias allow ancient_browser ancient_browser_value auth_basic auth_basic_user_file auth_http auth_http_header auth_http_timeout autoindex autoindex_exact_size autoindex_localtime charset charset_types client_body_buffer_size client_body_in_file_only client_body_in_single_buffer client_body_temp_path client_body_timeout client_header_buffer_size client_header_timeout client_max_body_size connection_pool_size create_full_put_path daemon dav_access dav_methods debug_connection debug_points default_type degradation degrade deny devpoll_changes devpoll_events directio directio_alignment empty_gif env epoll_events error_log eventport_events expires fastcgi_bind fastcgi_buffer_size fastcgi_buffers fastcgi_busy_buffers_size fastcgi_cache fastcgi_cache_key fastcgi_cache_methods fastcgi_cache_min_uses fastcgi_cache_path fastcgi_cache_use_stale fastcgi_cache_valid fastcgi_catch_stderr fastcgi_connect_timeout fastcgi_hide_header fastcgi_ignore_client_abort fastcgi_ignore_headers fastcgi_index fastcgi_intercept_errors fastcgi_max_temp_file_size fastcgi_next_upstream fastcgi_param fastcgi_pass_header fastcgi_pass_request_body fastcgi_pass_request_headers fastcgi_read_timeout fastcgi_send_lowat fastcgi_send_timeout fastcgi_split_path_info fastcgi_store fastcgi_store_access fastcgi_temp_file_write_size fastcgi_temp_path fastcgi_upstream_fail_timeout fastcgi_upstream_max_fails flv geoip_city geoip_country google_perftools_profiles gzip gzip_buffers gzip_comp_level gzip_disable gzip_hash gzip_http_version gzip_min_length gzip_no_buffer gzip_proxied gzip_static gzip_types gzip_vary gzip_window if_modified_since ignore_invalid_headers image_filter image_filter_buffer image_filter_jpeg_quality image_filter_transparency imap_auth imap_capabilities imap_client_buffer index ip_hash keepalive_requests keepalive_timeout kqueue_changes kqueue_events large_client_header_buffers limit_conn limit_conn_log_level limit_rate limit_rate_after limit_req limit_req_log_level limit_req_zone limit_zone lingering_time lingering_timeout lock_file log_format log_not_found log_subrequest map_hash_bucket_size map_hash_max_size master_process memcached_bind memcached_buffer_size memcached_connect_timeout memcached_next_upstream memcached_read_timeout memcached_send_timeout memcached_upstream_fail_timeout memcached_upstream_max_fails merge_slashes min_delete_depth modern_browser modern_browser_value msie_padding msie_refresh multi_accept open_file_cache open_file_cache_errors open_file_cache_events open_file_cache_min_uses open_file_cache_valid open_log_file_cache output_buffers override_charset perl perl_modules perl_require perl_set pid pop3_auth pop3_capabilities port_in_redirect postpone_gzipping postpone_output protocol proxy proxy_bind proxy_buffer proxy_buffer_size proxy_buffering proxy_buffers proxy_busy_buffers_size proxy_cache proxy_cache_key proxy_cache_methods proxy_cache_min_uses proxy_cache_path proxy_cache_use_stale proxy_cache_valid proxy_connect_timeout proxy_headers_hash_bucket_size proxy_headers_hash_max_size proxy_hide_header proxy_ignore_client_abort proxy_ignore_headers proxy_intercept_errors proxy_max_temp_file_size proxy_method proxy_next_upstream proxy_pass_error_message proxy_pass_header proxy_pass_request_body proxy_pass_request_headers proxy_read_timeout proxy_redirect proxy_send_lowat proxy_send_timeout proxy_set_body proxy_set_header proxy_ssl_session_reuse proxy_store proxy_store_access proxy_temp_file_write_size proxy_temp_path proxy_timeout proxy_upstream_fail_timeout proxy_upstream_max_fails random_index read_ahead real_ip_header recursive_error_pages request_pool_size reset_timedout_connection resolver resolver_timeout rewrite_log rtsig_overflow_events rtsig_overflow_test rtsig_overflow_threshold rtsig_signo satisfy secure_link_secret send_lowat send_timeout sendfile sendfile_max_chunk server_name_in_redirect server_names_hash_bucket_size server_names_hash_max_size server_tokens set_real_ip_from smtp_auth smtp_capabilities smtp_client_buffer smtp_greeting_delay so_keepalive source_charset ssi ssi_ignore_recycled_buffers ssi_min_file_chunk ssi_silent_errors ssi_types ssi_value_length ssl ssl_certificate ssl_certificate_key ssl_ciphers ssl_client_certificate ssl_crl ssl_dhparam ssl_engine ssl_prefer_server_ciphers ssl_protocols ssl_session_cache ssl_session_timeout ssl_verify_client ssl_verify_depth starttls stub_status sub_filter sub_filter_once sub_filter_types tcp_nodelay tcp_nopush thread_stack_size timeout timer_resolution types_hash_bucket_size types_hash_max_size underscores_in_headers uninitialized_variable_warn use user userid userid_domain userid_expires userid_mark userid_name userid_p3p userid_path userid_service valid_referers variables_hash_bucket_size variables_hash_max_size worker_connections worker_cpu_affinity worker_priority worker_processes worker_rlimit_core worker_rlimit_nofile worker_rlimit_sigpending worker_threads working_directory xclient xml_entities xslt_stylesheet xslt_typesdrew@li229-23"),o=t("http mail events server types location upstream charset_map limit_except if geo map"),s=t("include root server server_name listen internal proxy_pass memcached_pass fastcgi_pass try_files"),n=e.indentUnit;function a(e,t){return r=t,e}function l(e,t){e.eatWhile(/[\w\$_]/);var r=e.current();if(i.propertyIsEnumerable(r))return"keyword";if(o.propertyIsEnumerable(r))return"variable-2";if(s.propertyIsEnumerable(r))return"string-2";var n=e.next();return"@"==n?(e.eatWhile(/[\w\\\-]/),a("meta",e.current())):"/"==n&&e.eat("*")?(t.tokenize=c,c(e,t)):"<"==n&&e.eat("!")?(t.tokenize=p,p(e,t)):"="!=n?"~"!=n&&"|"!=n||!e.eat("=")?'"'==n||"'"==n?(t.tokenize=function(e){return function(t,r){for(var i,o=!1;null!=(i=t.next())&&(i!=e||o);)o=!o&&"\\"==i;return o||(r.tokenize=l),a("string","string")}}(n),t.tokenize(e,t)):"#"==n?(e.skipToEnd(),a("comment","comment")):"!"==n?(e.match(/^\s*\w*/),a("keyword","important")):/\d/.test(n)?(e.eatWhile(/[\w.%]/),a("number","unit")):/[,.+>*\/]/.test(n)?a(null,"select-op"):/[;{}:\[\]]/.test(n)?a(null,n):(e.eatWhile(/[\w\\\-]/),a("variable","variable")):a(null,"compare"):void a(null,"compare")}function c(e,t){for(var r,i=!1;null!=(r=e.next());){if(i&&"/"==r){t.tokenize=l;break}i="*"==r}return a("comment","comment")}function p(e,t){for(var r,i=0;null!=(r=e.next());){if(i>=2&&">"==r){t.tokenize=l;break}i="-"==r?i+1:0}return a("comment","comment")}return{startState:function(e){return{tokenize:l,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;r=null;var i=t.tokenize(e,t),o=t.stack[t.stack.length-1];return"hash"==r&&"rule"==o?i="atom":"variable"==i&&("rule"==o?i="number":o&&"@media{"!=o||(i="tag")),"rule"==o&&/^[\{\};]$/.test(r)&&t.stack.pop(),"{"==r?"@media"==o?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):"}"==r?t.stack.pop():"@media"==r?t.stack.push("@media"):"{"==o&&"comment"!=r&&t.stack.push("rule"),i},indent:function(e,t){var r=e.stack.length;return/^\}/.test(t)&&(r-="rule"==e.stack[e.stack.length-1]?2:1),e.baseIndent+r*n},electricChars:"}"}}),e.defineMIME("text/x-nginx-conf","nginx")}(r("VrN/"))},v6xn:function(e,t,r){var i=r("C2SN");e.exports=function(e,t){return new(i(e))(t)}},xvv9:function(e,t,r){r("cHUd")("Set")}}]);