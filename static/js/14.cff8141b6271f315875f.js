(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{eny5:function(t,e,l){"use strict";l.r(e);var i=l("QbLZ"),r=l.n(i),o=l("L2JU"),s={data:function(){return{}},created:function(){},computed:r()({},Object(o.mapGetters)({buildList:"buildModule/filterBuildList",pagination:"buildModule/pagination"})),methods:r()({},Object(o.mapActions)({freshBuildStatusReq:"buildModule/freshBuildStatus"}),{handleFresh:function(t){this.freshBuildStatusReq(t)}})},n=l("KHd+"),a=Object(n.a)(s,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:t.$isShowLoading("buildList"),expression:"$isShowLoading('buildList')"}]},[l("el-table",{attrs:{data:t.buildList,border:""}},[l("el-table-column",{attrs:{label:"项目名称",prop:"project.name"}}),t._v(" "),l("el-table-column",{attrs:{label:"版本号",prop:"version.versionCode"}}),t._v(" "),l("el-table-column",{attrs:{label:"任务ID",prop:"buildId"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("a",{attrs:{href:e.row.project.jenkinsUrl+""+e.row.buildId,target:"blank"}},[t._v(t._s(e.row.buildId))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"编译状态",prop:"buildStatus"},scopedSlots:t._u([{key:"default",fn:function(e){return["SUCCESS"===e.row.buildStatus?l("el-tag",{attrs:{type:"success"}},[t._v("编译完成\n                ")]):t._e(),t._v(" "),"FAILED"===e.row.buildStatus?l("el-tag",{attrs:{type:"danger"}},[t._v("\n                    编译失败\n                ")]):t._e(),t._v(" "),"RUNNING"===e.row.buildStatus?l("el-button",{attrs:{type:"text",loading:!0}},[t._v("编译中\n                ")]):t._e()]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["RUNNING"===e.row.buildStatus||"SUCCESS"===e.row.buildStatus?l("el-button",{attrs:{type:"primary",plain:"",size:"mini",loading:t.$isShowLoading("buildList")},on:{click:function(l){t.handleFresh(e.row)}}},[t._v("\n                    更新\n                ")]):t._e()]}}])})],1),t._v(" "),l("table-pagination",{attrs:{pagination:t.pagination}})],1)},[],!1,null,null,null).exports,u={data:function(){return{form:{},buildOptions:[{status:"SUCCESS",label:"编译完成"},{status:"FAILED",label:"编译失败"},{status:"RUNNING",label:"编译中"}]}},created:function(){this.getProjectListReq({currentPage:1,pageSize:1e3})},computed:r()({},Object(o.mapGetters)({projectList:"projectModule/filterProjectList",versionList:"versionModule/filterVersionList"})),methods:r()({},Object(o.mapActions)({getProjectListReq:"projectModule/getProjectList",getVersionListReq:"versionModule/getVersionList",getBuildListReq:"buildModule/getBuildList"}),{getVersionList:function(){var t={projectId:this.form.projectId,currentPage:1,pageSize:1e3};this.getVersionListReq(t)},getBuildList:function(t){var e=this.$formatSearchData(this.form);this.getBuildListReq(e),this.$router.replace({query:e})}})},c={components:{List:a,Search:Object(n.a)(u,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("el-card",{staticClass:"query-form",attrs:{shadow:"never"}},[l("el-form",{attrs:{inline:!0,model:t.form,"label-width":"68px",onsubmit:"return false"}},[l("el-form-item",{attrs:{label:"项目名称",prop:"projectId"}},[l("el-select",{attrs:{placeholder:"请选择项目名称",filterable:"",clearable:""},on:{change:function(e){t.getVersionList()}},model:{value:t.form.projectId,callback:function(e){t.$set(t.form,"projectId",e)},expression:"form.projectId"}},t._l(t.projectList,function(t){return l("el-option",{key:t.projectId,attrs:{label:t.name,value:t.projectId}})}))],1),t._v(" "),l("el-form-item",{attrs:{label:"版本号",prop:"versionId"}},[l("el-select",{attrs:{placeholder:"请选择版本号",filterable:"",clearable:""},model:{value:t.form.versionId,callback:function(e){t.$set(t.form,"versionId",e)},expression:"form.versionId"}},t._l(t.versionList,function(t){return l("el-option",{key:t.versionId,attrs:{label:t.versionCode,value:t.versionId}})}))],1),t._v(" "),l("el-form-item",{attrs:{label:"编译状态",prop:"clusterId"}},[l("el-select",{attrs:{placeholder:"请选择编译状态",filterable:"",clearable:""},model:{value:t.form.buildStatus,callback:function(e){t.$set(t.form,"buildStatus",e)},expression:"form.buildStatus"}},t._l(t.buildOptions,function(t){return l("el-option",{key:t.status,attrs:{label:t.label,value:t.status}})}))],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(e){t.getBuildList(t.form)}}},[t._v("\n                查询\n            ")])],1)],1)],1)},[],!1,null,null,null).exports},computed:{query:function(){return this.$route.query}},created:function(){this.getBuildList()},methods:r()({},Object(o.mapActions)({getBuildListReq:"buildModule/getBuildList"}),{getBuildList:function(){this.getBuildListReq(this.query)}}),watch:{query:function(){this.getBuildList()}}},d=Object(n.a)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("search"),this._v(" "),e("list")],1)},[],!1,null,null,null);e.default=d.exports}}]);